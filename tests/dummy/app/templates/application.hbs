<h1>Tri-State</h1>

<button {{action 'flushAndRefreshModel'}}>Flush and Reload Data</button>
<button {{action 'refreshModel'}}>Reload Data</button>

{{#tri-state
  promises=(hash
    user=model.userRequest
    events=model.eventsRequest
  )
  showLastSuccessful=showLastSuccessful
  forceResolveAll=false
  onFulfilledData=(action 'resetShowLastSuccessful')
  as |tri|
}}
  {{#tri.loading.component}}
    <h1>Loading Component</h1>
    <p>Please wait...</p>
  {{/tri.loading.component}}

  {{#tri.error.component as |error|}}
    <h1>Error Component</h1>
    <p>{{error.name}}</p>
  {{/tri.error.component}}

  {{#tri.success.component as |data|}}
    {{#tri-success user=data.user events=data.events as |user events|}}
      {{if tri.loading.isActive 'Updating...'}}
      <p>User: {{user.name}} | Last updated: {{user.time}}</p>
      <p>Events</p>
      <ul>
        {{#each events as |event|}}
          <li>Name: {{event.name}} | Location: {{event.location}}</li>
        {{/each}}
      </ul>
    {{/tri-success}}
  {{/tri.success.component}}
{{/tri-state}}


{{#tri-state
  promises=model.postRequest
  showLastSuccessful=showLastSuccessful
  onFulfilledData=(action 'resetShowLastSuccessful')
  loadingComponent='tri-loading'
  errorComponent='tri-error'
  as |tri|
}}
  {{tri.loading.component}}
  {{tri.error.component}}
  {{#tri.success.component as |data|}}
    <h1>Success Component</h1>
    <p>Post: {{data.title}}</p>
  {{/tri.success.component}}
{{/tri-state}}
